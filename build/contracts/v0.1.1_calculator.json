{
  "contractName": "v0.1.1_calculator",
  "abi": [
    {
      "outputs": [],
      "inputs": [
        {
          "type": "address",
          "name": "_compound_addr"
        }
      ],
      "stateMutability": "nonpayable",
      "type": "constructor"
    },
    {
      "name": "getFloatIndex",
      "outputs": [
        {
          "type": "uint256",
          "name": ""
        }
      ],
      "inputs": [],
      "stateMutability": "view",
      "type": "function",
      "gas": 149063,
      "constant": true
    },
    {
      "name": "getFee",
      "outputs": [
        {
          "type": "uint256",
          "name": ""
        }
      ],
      "inputs": [
        {
          "type": "int128",
          "name": "_total_liquidity"
        },
        {
          "type": "int128",
          "name": "_fee_base"
        },
        {
          "type": "int128",
          "name": "_active_collateral"
        },
        {
          "type": "int128",
          "name": "_utilization_inflection"
        },
        {
          "type": "int128",
          "name": "_fee_sensitivity"
        },
        {
          "type": "int128",
          "name": "_utilization_multiplier"
        }
      ],
      "stateMutability": "view",
      "type": "function",
      "gas": 3878,
      "constant": true
    }
  ],
  "bytecode": "0x740100000000000000000000000000000000000000006020526f7fffffffffffffffffffffffffffffff6040527fffffffffffffffffffffffffffffffff8000000000000000000000000000000060605274012a05f1fffffffffffffffffffffffffdabf41c006080527ffffffffffffffffffffffffed5fa0e000000000000000000000000000000000060a0526020610adf6101403934156100a157600080fd5b6020610adf60c03960c05160205181106100ba57600080fd5b5061014051600055610ac756600436101561000d576109fa565b600035601c52740100000000000000000000000000000000000000006020526f7fffffffffffffffffffffffffffffff6040527fffffffffffffffffffffffffffffffff8000000000000000000000000000000060605274012a05f1fffffffffffffffffffffffffdabf41c006080527ffffffffffffffffffffffffed5fa0e000000000000000000000000000000000060a052632e6e4f3160005114156103885734156100ba57600080fd5b6402540be40060206101c0600463f8f9da286101605261017c6000545afa6100e157600080fd5b601f3d116100ee57600080fd5b6000506101c0510260805181111561010557600080fd5b61014052610140516b204fce5e3e2502611000000060a051818061012857600080fd5b6402540be4008402058060805190131561014157600080fd5b809190121561014f57600080fd5b905090506534630b8a000060a051818302831583858305141761017157600080fd5b6402540be400810590508060805190131561018b57600080fd5b809190121561019957600080fd5b905090506402540be40060a051818301806080519013156101b957600080fd5b80919012156101c757600080fd5b905090506101e0526101e0516101e05160a05181830283158385830514176101ee57600080fd5b6402540be400810590508060805190131561020857600080fd5b809190121561021657600080fd5b90509050610200526102206000610165818352015b610200516101e05160a051818302831583858305141761024a57600080fd5b6402540be400810590508060805190131561026457600080fd5b809190121561027257600080fd5b90509050610200525b815160010180835281141561022b575b5050610200516402540be40060a051818303806080519013156102ad57600080fd5b80919012156102bb57600080fd5b90509050610240526102405164e8d4a5100060a05181830283158385830514176102e457600080fd5b6402540be40081059050806080519013156102fe57600080fd5b809190121561030c57600080fd5b90509050610260526402540be400610260516b204fce5e3e2502611000000060a051818302831583858305141761034257600080fd5b6402540be400810590508060805190131561035c57600080fd5b809190121561036a57600080fd5b90509050600081121561037c57600080fd5b0460005260206000f350005b639fbe990360005114156109f95734156103a157600080fd5b606051600435806040519013156103b757600080fd5b80919012156103c557600080fd5b50606051602435806040519013156103dc57600080fd5b80919012156103ea57600080fd5b506060516044358060405190131561040157600080fd5b809190121561040f57600080fd5b506060516064358060405190131561042657600080fd5b809190121561043457600080fd5b506060516084358060405190131561044b57600080fd5b809190121561045957600080fd5b5060605160a4358060405190131561047057600080fd5b809190121561047e57600080fd5b506402540be40060043502600160a05181830283158385830514176104a257600080fd5b6402540be40081059050806080519013156104bc57600080fd5b80919012156104ca57600080fd5b90509050610140526402540be40060243502600160a05181830283158385830514176104f557600080fd5b6402540be400810590508060805190131561050f57600080fd5b809190121561051d57600080fd5b90509050610160526402540be40060443502600160a051818302831583858305141761054857600080fd5b6402540be400810590508060805190131561056257600080fd5b809190121561057057600080fd5b90509050610180526402540be40060643502600160a051818302831583858305141761059b57600080fd5b6402540be40081059050806080519013156105b557600080fd5b80919012156105c357600080fd5b905090506101a0526402540be40060843502600160a05181830283158385830514176105ee57600080fd5b6402540be400810590508060805190131561060857600080fd5b809190121561061657600080fd5b905090506101c0526402540be40060a43502600160a051818302831583858305141761064157600080fd5b6402540be400810590508060805190131561065b57600080fd5b809190121561066957600080fd5b905090506101e0526101405115156106f2576402540be400610160516b204fce5e3e2502611000000060a05181830283158385830514176106a957600080fd5b6402540be40081059050806080519013156106c357600080fd5b80919012156106d157600080fd5b9050905060008112156106e357600080fd5b0460005260206000f3506109f7565b6101a051610180516101405160a051818061070c57600080fd5b6402540be4008402058060805190131561072557600080fd5b809190121561073357600080fd5b9050905064e8d4a5100060a051818302831583858305141761075457600080fd5b6402540be400810590508060805190131561076e57600080fd5b809190121561077c57600080fd5b905090501215156108e8576101c0516101e05160a05181830283158385830514176107a657600080fd5b6402540be40081059050806080519013156107c057600080fd5b80919012156107ce57600080fd5b90509050610200526402540be400610180516102005160a05181830283158385830514176107fb57600080fd5b6402540be400810590508060805190131561081557600080fd5b809190121561082357600080fd5b905090506101405160a051818061083957600080fd5b6402540be4008402058060805190131561085257600080fd5b809190121561086057600080fd5b905090506101605160a0518183018060805190131561087e57600080fd5b809190121561088c57600080fd5b90509050600160a05181806108a057600080fd5b6402540be400840205806080519013156108b957600080fd5b80919012156108c757600080fd5b9050905060008112156108d957600080fd5b0460005260206000f3506109f6565b6402540be400610180516101c05160a051818302831583858305141761090d57600080fd5b6402540be400810590508060805190131561092757600080fd5b809190121561093557600080fd5b905090506101405160a051818061094b57600080fd5b6402540be4008402058060805190131561096457600080fd5b809190121561097257600080fd5b905090506101605160a0518183018060805190131561099057600080fd5b809190121561099e57600080fd5b90509050600160a05181806109b257600080fd5b6402540be400840205806080519013156109cb57600080fd5b80919012156109d957600080fd5b9050905060008112156109eb57600080fd5b0460005260206000f3505b5b005b5b60006000fd5b6100c7610ac7036100c76000396100c7610ac7036000f3",
  "deployedBytecode": "0x600436101561000d576109fa565b600035601c52740100000000000000000000000000000000000000006020526f7fffffffffffffffffffffffffffffff6040527fffffffffffffffffffffffffffffffff8000000000000000000000000000000060605274012a05f1fffffffffffffffffffffffffdabf41c006080527ffffffffffffffffffffffffed5fa0e000000000000000000000000000000000060a052632e6e4f3160005114156103885734156100ba57600080fd5b6402540be40060206101c0600463f8f9da286101605261017c6000545afa6100e157600080fd5b601f3d116100ee57600080fd5b6000506101c0510260805181111561010557600080fd5b61014052610140516b204fce5e3e2502611000000060a051818061012857600080fd5b6402540be4008402058060805190131561014157600080fd5b809190121561014f57600080fd5b905090506534630b8a000060a051818302831583858305141761017157600080fd5b6402540be400810590508060805190131561018b57600080fd5b809190121561019957600080fd5b905090506402540be40060a051818301806080519013156101b957600080fd5b80919012156101c757600080fd5b905090506101e0526101e0516101e05160a05181830283158385830514176101ee57600080fd5b6402540be400810590508060805190131561020857600080fd5b809190121561021657600080fd5b90509050610200526102206000610165818352015b610200516101e05160a051818302831583858305141761024a57600080fd5b6402540be400810590508060805190131561026457600080fd5b809190121561027257600080fd5b90509050610200525b815160010180835281141561022b575b5050610200516402540be40060a051818303806080519013156102ad57600080fd5b80919012156102bb57600080fd5b90509050610240526102405164e8d4a5100060a05181830283158385830514176102e457600080fd5b6402540be40081059050806080519013156102fe57600080fd5b809190121561030c57600080fd5b90509050610260526402540be400610260516b204fce5e3e2502611000000060a051818302831583858305141761034257600080fd5b6402540be400810590508060805190131561035c57600080fd5b809190121561036a57600080fd5b90509050600081121561037c57600080fd5b0460005260206000f350005b639fbe990360005114156109f95734156103a157600080fd5b606051600435806040519013156103b757600080fd5b80919012156103c557600080fd5b50606051602435806040519013156103dc57600080fd5b80919012156103ea57600080fd5b506060516044358060405190131561040157600080fd5b809190121561040f57600080fd5b506060516064358060405190131561042657600080fd5b809190121561043457600080fd5b506060516084358060405190131561044b57600080fd5b809190121561045957600080fd5b5060605160a4358060405190131561047057600080fd5b809190121561047e57600080fd5b506402540be40060043502600160a05181830283158385830514176104a257600080fd5b6402540be40081059050806080519013156104bc57600080fd5b80919012156104ca57600080fd5b90509050610140526402540be40060243502600160a05181830283158385830514176104f557600080fd5b6402540be400810590508060805190131561050f57600080fd5b809190121561051d57600080fd5b90509050610160526402540be40060443502600160a051818302831583858305141761054857600080fd5b6402540be400810590508060805190131561056257600080fd5b809190121561057057600080fd5b90509050610180526402540be40060643502600160a051818302831583858305141761059b57600080fd5b6402540be40081059050806080519013156105b557600080fd5b80919012156105c357600080fd5b905090506101a0526402540be40060843502600160a05181830283158385830514176105ee57600080fd5b6402540be400810590508060805190131561060857600080fd5b809190121561061657600080fd5b905090506101c0526402540be40060a43502600160a051818302831583858305141761064157600080fd5b6402540be400810590508060805190131561065b57600080fd5b809190121561066957600080fd5b905090506101e0526101405115156106f2576402540be400610160516b204fce5e3e2502611000000060a05181830283158385830514176106a957600080fd5b6402540be40081059050806080519013156106c357600080fd5b80919012156106d157600080fd5b9050905060008112156106e357600080fd5b0460005260206000f3506109f7565b6101a051610180516101405160a051818061070c57600080fd5b6402540be4008402058060805190131561072557600080fd5b809190121561073357600080fd5b9050905064e8d4a5100060a051818302831583858305141761075457600080fd5b6402540be400810590508060805190131561076e57600080fd5b809190121561077c57600080fd5b905090501215156108e8576101c0516101e05160a05181830283158385830514176107a657600080fd5b6402540be40081059050806080519013156107c057600080fd5b80919012156107ce57600080fd5b90509050610200526402540be400610180516102005160a05181830283158385830514176107fb57600080fd5b6402540be400810590508060805190131561081557600080fd5b809190121561082357600080fd5b905090506101405160a051818061083957600080fd5b6402540be4008402058060805190131561085257600080fd5b809190121561086057600080fd5b905090506101605160a0518183018060805190131561087e57600080fd5b809190121561088c57600080fd5b90509050600160a05181806108a057600080fd5b6402540be400840205806080519013156108b957600080fd5b80919012156108c757600080fd5b9050905060008112156108d957600080fd5b0460005260206000f3506109f6565b6402540be400610180516101c05160a051818302831583858305141761090d57600080fd5b6402540be400810590508060805190131561092757600080fd5b809190121561093557600080fd5b905090506101405160a051818061094b57600080fd5b6402540be4008402058060805190131561096457600080fd5b809190121561097257600080fd5b905090506101605160a0518183018060805190131561099057600080fd5b809190121561099e57600080fd5b90509050600160a05181806109b257600080fd5b6402540be400840205806080519013156109cb57600080fd5b80919012156109d957600080fd5b9050905060008112156109eb57600080fd5b0460005260206000f3505b5b005b5b60006000fd",
  "source": "# (c) 2020 Greenwood\n# @title Greenwood Calculator\n# @author Brandon McFarland\n# @notice An external calculation contract for the Greenwood protocol\n\ninterface COMPOUND:\n    def borrowRatePerBlock() -> uint256: view\n\nblocksPerDay: constant(decimal) = 5760.0\nETH_PRECISION: constant(decimal) = 1000000000000000000.0\nCONTRACT_PRECISION: constant(decimal) = 0.0000000001\ndecimalZero: constant(decimal) = 0.0\n\ncompoundHandle: COMPOUND\n\n@external\ndef __init__(_compound_addr:address):\n    self.compoundHandle = COMPOUND(_compound_addr)\n\n@external\n@view\ndef getFloatIndex() -> uint256:\n    rate: decimal = convert(self.compoundHandle.borrowRatePerBlock(), decimal)\n    t0: decimal = rate / ETH_PRECISION * blocksPerDay + convert(1,decimal)\n    t1: decimal = t0 * t0\n    for i in range(357):\n        t1 = t1 * t0\n    t2: decimal = t1 - convert(1, decimal)\n    t3: decimal = t2 * convert(100,decimal)\n    return convert(t3 * ETH_PRECISION, uint256)\n\n@external\n@view\ndef getFee(_total_liquidity: int128, _fee_base: int128, _active_collateral: int128, _utilization_inflection: int128, _fee_sensitivity: int128, _utilization_multiplier: int128) -> uint256:\n    totalLiquidity: decimal = convert(_total_liquidity, decimal) * CONTRACT_PRECISION\n    feeBase: decimal = convert(_fee_base,decimal) * CONTRACT_PRECISION\n    activeCollateral: decimal = convert(_active_collateral,decimal) * CONTRACT_PRECISION\n    utilizationInflection: decimal = convert(_utilization_inflection,decimal) * CONTRACT_PRECISION\n    feeSensitivity: decimal = convert(_fee_sensitivity, decimal) * CONTRACT_PRECISION\n    utilizationMultiplier: decimal = convert(_utilization_multiplier, decimal) * CONTRACT_PRECISION\n\n    if totalLiquidity == decimalZero:\n        return convert(feeBase * ETH_PRECISION, uint256)\n    else:\n        if (activeCollateral / totalLiquidity) * 100.0 >= utilizationInflection:\n            feeMultiplier: decimal = feeSensitivity * utilizationMultiplier\n            return convert((((activeCollateral * feeMultiplier) / totalLiquidity) + feeBase) / CONTRACT_PRECISION, uint256)\n        else:\n            return convert((((activeCollateral * feeSensitivity) / totalLiquidity) + feeBase) / CONTRACT_PRECISION, uint256)",
  "sourcePath": "/Users/brandonmcfaraland/Desktop/protocol/dev_protocol_contracts/contracts/v0.1.1_calculator.vy",
  "compiler": {
    "name": "vyper",
    "version": "0.2.3+commit.006968f"
  },
  "networks": {
    "42": {
      "events": {},
      "links": {},
      "address": "0xdDf8c5a296068718Cb1D90726f3FACb610f58F84",
      "transactionHash": "0xe828f06c8775b41274f4a83ecaf0e88d426a802a9bcf5bde941722050c74e5cc"
    }
  },
  "schemaVersion": "3.2.0",
  "updatedAt": "2020-10-15T21:40:05.791Z",
  "networkType": "ethereum"
}